{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function c(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function l(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?c(s,!0).forEach(function(o){t(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):c(s).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))})}return n}var u=r(d[4]),f=(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};o(this,t),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=n}return s(t,[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,o,s,c){var l=this._config,f=l.itemVisiblePercentThreshold,v=l.viewAreaCoveragePercentThreshold,b=null!=v,y=b?v:f;u(null!=y&&null!=f!=(null!=v),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var p=[];if(0===t)return p;var w=-1,_=c||{first:0,last:t-1},I=_.first,O=_.last;if(O>=t)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:c,itemCount:t})),[];for(var k=I;k<=O;k++){var P=s(k);if(P){var S=P.offset-n,j=S+P.length;if(S<o&&j>0)w=k,h(b,y,S,j,o,P.length)&&p.push(k);else if(w>=0)break}}return p}},{key:\"onUpdate\",value:function(t,n,o,s,c,l,u){var f=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==t&&s(0)){var h=[];if(t&&(h=this.computeViewableItems(t,n,o,s,u)),this._viewableIndices.length!==h.length||!this._viewableIndices.every(function(t,n){return t===h[n]}))if(this._viewableIndices=h,this._config.minimumViewTime){var v=setTimeout(function(){f._timers.delete(v),f._onUpdateSync(h,l,c)},this._config.minimumViewTime);this._timers.add(v)}else this._onUpdateSync(h,l,c)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(t,o,s){var c=this;t=t.filter(function(t){return c._viewableIndices.includes(t)});var u=this._viewableItems,f=new Map(t.map(function(t){var n=s(t,!0);return[n.key,n]})),h=[],v=f,b=Array.isArray(v),y=0;for(v=b?v:v[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]();;){var p;if(b){if(y>=v.length)break;p=v[y++]}else{if((y=v.next()).done)break;p=y.value}var w=n(p,2),_=w[0],I=w[1];u.has(_)||h.push(I)}var O=u,k=Array.isArray(O),P=0;for(O=k?O:O[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]();;){var S;if(k){if(P>=O.length)break;S=O[P++]}else{if((P=O.next()).done)break;S=P.value}var j=n(S,2),T=j[0],A=j[1];f.has(T)||h.push(l({},A,{isViewable:!1}))}h.length>0&&(this._viewableItems=f,o({viewableItems:Array.from(f.values()),changed:h,viewabilityConfig:this._config}))}}]),t})();function h(t,n,o,s,c,l){if(b(o,s,c))return!0;var u=v(o,s,c);return 100*(t?u/c:u/l)>=n}function v(t,n,o){var s=Math.min(n,o)-Math.max(t,0);return Math.max(0,s)}function b(t,n,o){return t>=0&&n<=o&&n>t}m.exports=f});","map":[[1,28,10,0],[1,638,12,0],[1,642,12,6,"invariant"],[1,644,12,18,"require"],[1,646,12,25,"d"],[1,648,12,25],[1,652,71,6,"ViewabilityHelper"],[1,666,81,2],[1,675,81,2,"ViewabilityHelper"],[1,679,83,4],[1,683,82,4,"config"],[1,685,83,4,"arguments"],[1,695,83,4,"length"],[1,702,83,4],[1,710,83,4,"undefined"],[1,714,83,4,"arguments"],[1,724,83,4],[1,727,83,4,"arguments"],[1,737,83,4],[1,741,82,33,"viewAreaCoveragePercentThreshold"],[1,774,82,67],[1,777,83,4,"_classCallCheck"],[1,779,83,4,"this"],[1,784,83,4,"ViewabilityHelper"],[1,787,83,4,"this"],[1,792,73,2,"_hasInteracted"],[1,808,73,28],[1,810,83,4,"this"],[1,815,77,2,"_timers"],[1,823,77,25],[1,827,77,29,"Set"],[1,831,83,4,"this"],[1,836,78,2,"_viewableIndices"],[1,856,83,4,"this"],[1,861,79,2,"_viewableItems"],[1,876,79,43],[1,880,79,47,"Map"],[1,884,84,4,"this"],[1,889,84,9,"_config"],[1,897,84,19,"config"],[1,943,91,4,"this"],[1,948,91,9,"_timers"],[1,956,91,17,"forEach"],[1,964,91,25,"clearTimeout"],[1,1023,98,4,"itemCount"],[1,1025,99,4,"scrollOffset"],[1,1027,100,4,"viewportHeight"],[1,1029,101,4,"getFrameMetrics"],[1,1031,102,4,"renderRange"],[1,1034,103,19],[1,1038,103,19,"_this$_config"],[1,1040,107,8,"this"],[1,1045,107,13,"_config"],[1,1053,105,6,"itemVisiblePercentThreshold"],[1,1055,103,19,"_this$_config"],[1,1057,105,6,"itemVisiblePercentThreshold"],[1,1085,106,6,"viewAreaCoveragePercentThreshold"],[1,1087,103,19,"_this$_config"],[1,1089,106,6,"viewAreaCoveragePercentThreshold"],[1,1122,108,10,"viewAreaMode"],[1,1124,108,61],[1,1130,108,25,"viewAreaCoveragePercentThreshold"],[1,1132,109,10,"viewablePercentThreshold"],[1,1134,109,37,"viewAreaMode"],[1,1136,110,8,"viewAreaCoveragePercentThreshold"],[1,1138,111,8,"itemVisiblePercentThreshold"],[1,1140,112,4,"invariant"],[1,1142,113,34],[1,1148,113,6,"viewablePercentThreshold"],[1,1151,114,40],[1,1157,114,9,"itemVisiblePercentThreshold"],[1,1161,115,47],[1,1167,115,11,"viewAreaCoveragePercentThreshold"],[1,1170,116,6],[1,1261,118,4],[1,1265,118,10,"viewableIndices"],[1,1270,119,4],[1,1273,119,22],[1,1277,119,8,"itemCount"],[1,1279,120,6],[1,1286,120,13,"viewableIndices"],[1,1288,122,4],[1,1292,122,8,"firstVisible"],[1,1295,122,20],[1,1297,103,19,"_ref"],[1,1299,123,26,"renderRange"],[1,1303,123,42,"first"],[1,1309,123,49],[1,1311,123,52,"last"],[1,1316,123,58,"itemCount"],[1,1318,123,70],[1,1321,123,11,"first"],[1,1323,103,19,"_ref"],[1,1325,123,11,"first"],[1,1331,123,18,"last"],[1,1333,103,19,"_ref"],[1,1335,123,18,"last"],[1,1340,124,4],[1,1343,124,8,"last"],[1,1346,124,16,"itemCount"],[1,1348,129,6],[1,1355,125,6,"console"],[1,1363,125,14,"warn"],[1,1368,126,8],[1,1414,127,10,"JSON"],[1,1419,127,15,"stringify"],[1,1430,127,26,"renderRange"],[1,1442,127,26,"renderRange"],[1,1444,127,39,"itemCount"],[1,1454,127,39,"itemCount"],[1,1462,131,4],[1,1466,131,9],[1,1470,131,13,"idx"],[1,1472,131,19,"first"],[1,1474,131,26,"idx"],[1,1477,131,33,"last"],[1,1479,131,39,"idx"],[1,1483,131,46],[1,1484,132,6],[1,1488,132,12,"metrics"],[1,1490,132,22,"getFrameMetrics"],[1,1492,132,38,"idx"],[1,1495,133,6],[1,1498,133,11,"metrics"],[1,1500,133,6],[1,1501,136,6],[1,1505,136,12,"top"],[1,1507,136,18,"metrics"],[1,1509,136,26,"offset"],[1,1516,136,35,"scrollOffset"],[1,1518,137,12,"bottom"],[1,1520,137,21,"top"],[1,1522,137,27,"metrics"],[1,1524,137,35,"length"],[1,1531,138,6],[1,1534,138,10,"top"],[1,1536,138,16,"viewportHeight"],[1,1539,138,34,"bottom"],[1,1541,138,43],[1,1543,139,8,"firstVisible"],[1,1545,139,23,"idx"],[1,1547,141,10,"_isViewable"],[1,1549,142,12,"viewAreaMode"],[1,1551,143,12,"viewablePercentThreshold"],[1,1553,144,12,"top"],[1,1555,145,12,"bottom"],[1,1557,146,12,"viewportHeight"],[1,1559,147,12,"metrics"],[1,1561,147,20,"length"],[1,1570,150,10,"viewableIndices"],[1,1572,150,26,"push"],[1,1577,150,31,"idx"],[1,1585,152,13],[1,1588,152,17,"firstVisible"],[1,1591,152,33],[1,1593,153,8],[1,1600,156,4],[1,1607,156,11,"viewableIndices"],[1,1642,164,4,"itemCount"],[1,1644,165,4,"scrollOffset"],[1,1646,166,4,"viewportHeight"],[1,1648,167,4,"getFrameMetrics"],[1,1650,168,4,"createViewToken"],[1,1652,169,4,"onViewableItemsChanged"],[1,1654,173,4,"renderRange"],[1,1657,174,10],[1,1661,174,10,"_this"],[1,1663,174,10,"this"],[1,1668,175,4],[1,1673,176,7,"this"],[1,1678,176,12,"_config"],[1,1686,176,20,"waitForInteraction"],[1,1706,176,43,"this"],[1,1711,176,48,"_hasInteracted"],[1,1728,177,20],[1,1732,177,6,"itemCount"],[1,1735,178,7,"getFrameMetrics"],[1,1737,178,23],[1,1740,175,4],[1,1741,182,4],[1,1745,182,8,"viewableIndices"],[1,1750,192,4],[1,1753,183,8,"itemCount"],[1,1757,184,6,"viewableIndices"],[1,1759,184,24,"this"],[1,1764,184,29,"computeViewableItems"],[1,1785,185,8,"itemCount"],[1,1787,186,8,"scrollOffset"],[1,1789,187,8,"viewportHeight"],[1,1791,188,8,"getFrameMetrics"],[1,1793,189,8,"renderRange"],[1,1797,193,6,"this"],[1,1802,193,11,"_viewableIndices"],[1,1819,193,28,"length"],[1,1828,193,39,"viewableIndices"],[1,1830,193,55,"length"],[1,1839,194,6,"this"],[1,1844,194,11,"_viewableIndices"],[1,1861,194,28,"every"],[1,1867,194,34],[1,1876,194,35,"v"],[1,1878,194,38,"ii"],[1,1881,194,34],[1,1888,194,45,"v"],[1,1892,194,51,"viewableIndices"],[1,1894,194,67,"ii"],[1,1899,201,4],[1,1902,200,4,"this"],[1,1907,200,9,"_viewableIndices"],[1,1924,200,28,"viewableIndices"],[1,1926,201,8,"this"],[1,1931,201,13,"_config"],[1,1939,201,21,"minimumViewTime"],[1,1955,201,38],[1,1956,202,6],[1,1960,202,12,"handle"],[1,1962,202,21,"setTimeout"],[1,1973,202,32],[1,1984,203,8,"_this"],[1,1986,203,13,"_timers"],[1,1994,203,21,"delete"],[1,2001,203,28,"handle"],[1,2004,204,8,"_this"],[1,2006,204,13,"_onUpdateSync"],[1,2020,205,10,"viewableIndices"],[1,2022,206,10,"onViewableItemsChanged"],[1,2024,207,10,"createViewToken"],[1,2028,209,9,"this"],[1,2033,209,14,"_config"],[1,2041,209,22,"minimumViewTime"],[1,2058,210,6,"this"],[1,2063,210,11,"_timers"],[1,2071,210,19,"add"],[1,2075,210,23,"handle"],[1,2083,212,6,"this"],[1,2088,212,11,"_onUpdateSync"],[1,2102,213,8,"viewableIndices"],[1,2104,214,8,"onViewableItemsChanged"],[1,2106,215,8,"createViewToken"],[1,2157,224,4,"this"],[1,2162,224,9,"_viewableIndices"],[1,2226,231,4,"this"],[1,2231,231,9,"_hasInteracted"],[1,2247,231,26],[1,2287,235,4,"viewableIndicesToCheck"],[1,2289,236,4,"onViewableItemsChanged"],[1,2291,237,4,"createViewToken"],[1,2294,238,4],[1,2298,238,4,"_this2"],[1,2300,238,4,"this"],[1,2305,240,4,"viewableIndicesToCheck"],[1,2307,240,29,"viewableIndicesToCheck"],[1,2309,240,52,"filter"],[1,2316,240,59],[1,2325,240,59,"ii"],[1,2328,240,61],[1,2335,241,6,"_this2"],[1,2337,241,11,"_viewableIndices"],[1,2354,241,28,"includes"],[1,2363,241,37,"ii"],[1,2368,243,4],[1,2372,243,10,"prevItems"],[1,2374,243,22,"this"],[1,2379,243,27,"_viewableItems"],[1,2394,244,10,"nextItems"],[1,2396,244,22],[1,2400,244,26,"Map"],[1,2404,245,6,"viewableIndicesToCheck"],[1,2406,245,29,"map"],[1,2410,245,33],[1,2419,245,33,"ii"],[1,2422,246,8],[1,2426,246,14,"viewable"],[1,2428,246,25,"createViewToken"],[1,2430,246,41,"ii"],[1,2433,246,45],[1,2436,247,8],[1,2443,247,16,"viewable"],[1,2445,247,25,"key"],[1,2449,247,30,"viewable"],[1,2455,251,10,"changed"],[1,2460,252,4,"_iterator"],[1,2462,252,34,"nextItems"],[1,2464,252,4,"_isArray"],[1,2466,252,4,"Array"],[1,2472,252,4,"isArray"],[1,2480,252,4,"_iterator"],[1,2483,252,4,"_i"],[1,2485,252,4],[1,2487,252,4],[1,2491,252,4,"_iterator"],[1,2493,252,4,"_isArray"],[1,2495,252,4,"_iterator"],[1,2497,252,4,"_iterator"],[1,2499,252,4],[1,2518,252,4,"Symbol"],[1,2525,252,4,"Symbol"],[1,2532,252,4,"iterator"],[1,2541,252,4],[1,2559,252,45],[1,2560,252,45],[1,2564,252,45,"_ref4"],[1,2566,252,45],[1,2569,252,45,"_isArray"],[1,2571,252,45],[1,2572,252,45],[1,2575,252,45,"_i"],[1,2578,252,45,"_iterator"],[1,2580,252,45,"length"],[1,2587,252,45],[1,2593,252,45,"_ref4"],[1,2595,252,45,"_iterator"],[1,2597,252,45,"_i"],[1,2606,252,45],[1,2607,252,45],[1,2611,252,45,"_i"],[1,2613,252,45,"_iterator"],[1,2615,252,45,"next"],[1,2623,252,45,"done"],[1,2628,252,45],[1,2634,252,45,"_ref4"],[1,2636,252,45,"_i"],[1,2638,252,45,"value"],[1,2644,252,45],[1,2648,252,45,"_ref3"],[1,2650,252,45,"_slicedToArray"],[1,2652,252,45,"_ref4"],[1,2654,252,45],[1,2657,252,16,"key"],[1,2659,252,45,"_ref3"],[1,2661,252,45],[1,2664,252,21,"viewable"],[1,2666,252,45,"_ref3"],[1,2668,252,45],[1,2671,253,11,"prevItems"],[1,2673,253,21,"has"],[1,2677,253,25,"key"],[1,2681,254,8,"changed"],[1,2683,254,16,"push"],[1,2688,254,21,"viewable"],[1,2691,257,4],[1,2695,257,4,"_iterator2"],[1,2697,257,34,"prevItems"],[1,2699,257,4,"_isArray2"],[1,2701,257,4,"Array"],[1,2707,257,4,"isArray"],[1,2715,257,4,"_iterator2"],[1,2718,257,4,"_i2"],[1,2720,257,4],[1,2722,257,4],[1,2726,257,4,"_iterator2"],[1,2728,257,4,"_isArray2"],[1,2730,257,4,"_iterator2"],[1,2732,257,4,"_iterator2"],[1,2734,257,4],[1,2753,257,4,"Symbol"],[1,2760,257,4,"Symbol"],[1,2767,257,4,"iterator"],[1,2776,257,4],[1,2794,257,45],[1,2795,257,45],[1,2799,257,45,"_ref7"],[1,2801,257,45],[1,2804,257,45,"_isArray2"],[1,2806,257,45],[1,2807,257,45],[1,2810,257,45,"_i2"],[1,2813,257,45,"_iterator2"],[1,2815,257,45,"length"],[1,2822,257,45],[1,2828,257,45,"_ref7"],[1,2830,257,45,"_iterator2"],[1,2832,257,45,"_i2"],[1,2841,257,45],[1,2842,257,45],[1,2846,257,45,"_i2"],[1,2848,257,45,"_iterator2"],[1,2850,257,45,"next"],[1,2858,257,45,"done"],[1,2863,257,45],[1,2869,257,45,"_ref7"],[1,2871,257,45,"_i2"],[1,2873,257,45,"value"],[1,2879,257,45],[1,2883,257,45,"_ref6"],[1,2885,257,45,"_slicedToArray"],[1,2887,257,45,"_ref7"],[1,2889,257,45],[1,2892,257,16,"key"],[1,2894,257,45,"_ref6"],[1,2896,257,45],[1,2899,257,21,"viewable"],[1,2901,257,45,"_ref6"],[1,2903,257,45],[1,2906,258,11,"nextItems"],[1,2908,258,21,"has"],[1,2912,258,25,"key"],[1,2916,259,8,"changed"],[1,2918,259,16,"push"],[1,2923,259,8,"_objectSpread"],[1,2928,259,25,"viewable"],[1,2931,259,35,"isViewable"],[1,2943,259,47],[1,2948,262,8,"changed"],[1,2950,262,16,"length"],[1,2957,262,25],[1,2961,263,6,"this"],[1,2966,263,11,"_viewableItems"],[1,2981,263,28,"nextItems"],[1,2983,264,6,"onViewableItemsChanged"],[1,2986,265,8,"viewableItems"],[1,3000,265,23,"Array"],[1,3006,265,29,"from"],[1,3011,265,34,"nextItems"],[1,3013,265,44,"values"],[1,3023,266,8,"changed"],[1,3031,266,8,"changed"],[1,3033,267,8,"viewabilityConfig"],[1,3051,267,27,"this"],[1,3056,267,32,"_config"],[1,3077,273,0],[1,3086,273,9,"_isViewable"],[1,3088,274,2,"viewAreaMode"],[1,3090,275,2,"viewablePercentThreshold"],[1,3092,276,2,"top"],[1,3094,277,2,"bottom"],[1,3096,278,2,"viewportHeight"],[1,3098,279,2,"itemLength"],[1,3101,281,2],[1,3104,281,6,"_isEntirelyVisible"],[1,3106,281,25,"top"],[1,3108,281,30,"bottom"],[1,3110,281,38,"viewportHeight"],[1,3113,282,4],[1,3120,282,11],[1,3122,284,4],[1,3126,284,10,"pixels"],[1,3128,284,19,"_getPixelsVisible"],[1,3130,284,37,"top"],[1,3132,284,42,"bottom"],[1,3134,284,50,"viewportHeight"],[1,3137,287,4],[1,3144,286,6],[1,3149,286,13,"viewAreaMode"],[1,3151,286,28,"pixels"],[1,3153,286,37,"viewportHeight"],[1,3155,286,54,"pixels"],[1,3157,286,63,"itemLength"],[1,3161,287,22,"viewablePercentThreshold"],[1,3163,291,0],[1,3172,291,9,"_getPixelsVisible"],[1,3174,292,2,"top"],[1,3176,293,2,"bottom"],[1,3178,294,2,"viewportHeight"],[1,3181,296,2],[1,3185,296,8,"visibleHeight"],[1,3187,296,24,"Math"],[1,3192,296,29,"min"],[1,3196,296,33,"bottom"],[1,3198,296,41,"viewportHeight"],[1,3201,296,59,"Math"],[1,3206,296,64,"max"],[1,3210,296,68,"top"],[1,3212,296,73],[1,3215,297,2],[1,3222,297,9,"Math"],[1,3227,297,14,"max"],[1,3231,297,18],[1,3233,297,21,"visibleHeight"],[1,3236,300,0],[1,3245,300,9,"_isEntirelyVisible"],[1,3247,301,2,"top"],[1,3249,302,2,"bottom"],[1,3251,303,2,"viewportHeight"],[1,3254,305,2],[1,3261,305,9,"top"],[1,3264,305,16],[1,3267,305,21,"bottom"],[1,3270,305,31,"viewportHeight"],[1,3273,305,49,"bottom"],[1,3275,305,58,"top"],[1,3277,308,0,"module"],[1,3279,308,7,"exports"],[1,3287,308,17,"ViewabilityHelper"]]},"type":"js/module"}]}