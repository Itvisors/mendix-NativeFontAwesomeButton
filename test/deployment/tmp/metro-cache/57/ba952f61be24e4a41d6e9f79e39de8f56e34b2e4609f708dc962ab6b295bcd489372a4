{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"fbjs/lib/performanceNow","data":{"isAsync":false}},{"name":"fbjs/lib/warning","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]);function l(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,l)}return s}function o(n){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?l(o,!0).forEach(function(s){t(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):l(o).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}var _=r(d[3]),h=r(d[4]),u=function t(){s(this,t),this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0},f=[],c=10,y=null,p=(function(){function t(n){s(this,t),this._anyBlankStartTime=null,this._enabled=!1,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=n,this._enabled=(y||0)>Math.random(),this._resetData()}return n(t,null,[{key:\"addListener\",value:function(t){return h(null!==y,'Call `FillRateHelper.setSampleRate` before `addListener`.'),f.push(t),{remove:function(){f=f.filter(function(n){return t!==n})}}}},{key:\"setSampleRate\",value:function(t){y=t}},{key:\"setMinSampleCount\",value:function(t){c=t}}]),n(t,[{key:\"activate\",value:function(){this._enabled&&null==this._samplesStartTime&&(this._samplesStartTime=_())}},{key:\"deactivateAndFlush\",value:function(){if(this._enabled){var t=this._samplesStartTime;if(null!=t)if(this._info.sample_count<c)this._resetData();else{var n=_()-t,s=o({},this._info,{total_time_spent:n});f.forEach(function(t){return t(s)}),this._resetData()}}}},{key:\"computeBlankness\",value:function(t,n,s){if(!this._enabled||0===t.getItemCount(t.data)||null==this._samplesStartTime)return 0;var l=s.dOffset,o=s.offset,h=s.velocity,u=s.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(u),this._info.pixels_scrolled+=Math.round(Math.abs(l));var f=Math.round(1e3*Math.abs(h)),c=_();null!=this._anyBlankStartTime&&(this._info.any_blank_ms+=c-this._anyBlankStartTime),this._anyBlankStartTime=null,null!=this._mostlyBlankStartTime&&(this._info.mostly_blank_ms+=c-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var y=0,p=n.first,b=this._getFrameMetrics(p);p<=n.last&&(!b||!b.inLayout);)b=this._getFrameMetrics(p),p++;b&&p>0&&(y=Math.min(u,Math.max(0,b.offset-o)));for(var k=0,v=n.last,S=this._getFrameMetrics(v);v>=n.first&&(!S||!S.inLayout);)S=this._getFrameMetrics(v),v--;if(S&&v<t.getItemCount(t.data)-1){var M=S.offset+S.length;k=Math.min(u,Math.max(0,o+u-M))}var T=Math.round(y+k),O=T/u;return O>0?(this._anyBlankStartTime=c,this._info.any_blank_speed_sum+=f,this._info.any_blank_count++,this._info.pixels_blank+=T,O>.5&&(this._mostlyBlankStartTime=c,this._info.mostly_blank_count++)):(f<.01||Math.abs(l)<1)&&this.deactivateAndFlush(),O}},{key:\"enabled\",value:function(){return this._enabled}},{key:\"_resetData\",value:function(){this._anyBlankStartTime=null,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}]),t})();m.exports=p});","map":[[1,28,11,0],[1,628,16,0],[1,632,16,6,"performanceNow"],[1,634,16,23,"require"],[1,636,16,30,"d"],[1,638,16,30],[1,642,20,6,"warning"],[1,644,20,16,"require"],[1,646,20,23,"d"],[1,648,20,23],[1,652,24,6,"Info"],[1,682,25,2,"any_blank_count"],[1,698,25,20],[1,705,26,2,"any_blank_ms"],[1,718,26,17],[1,725,27,2,"any_blank_speed_sum"],[1,745,27,24],[1,752,28,2,"mostly_blank_count"],[1,771,28,23],[1,778,29,2,"mostly_blank_ms"],[1,794,29,20],[1,801,30,2,"pixels_blank"],[1,814,30,17],[1,821,31,2,"pixels_sampled"],[1,836,31,19],[1,843,32,2,"pixels_scrolled"],[1,859,32,20],[1,866,33,2,"total_time_spent"],[1,883,33,21],[1,890,34,2,"sample_count"],[1,903,34,17],[1,906,41,4,"_listeners"],[1,911,42,4,"_minSampleCount"],[1,913,42,22],[1,916,43,4,"_sampleRate"],[1,918,43,30],[1,923,53,6,"FillRateHelper"],[1,937,82,2],[1,946,82,2,"FillRateHelper"],[1,948,82,14,"getFrameMetrics"],[1,951,82,65,"_classCallCheck"],[1,953,82,65,"this"],[1,958,82,65,"FillRateHelper"],[1,961,82,65,"this"],[1,966,54,2,"_anyBlankStartTime"],[1,985,54,24],[1,990,82,65,"this"],[1,995,55,2,"_enabled"],[1,1005,55,13],[1,1007,82,65,"this"],[1,1012,57,2,"_info"],[1,1018,57,10],[1,1022,57,14,"Info"],[1,1024,82,65,"this"],[1,1029,58,2,"_mostlyBlankStartTime"],[1,1051,58,27],[1,1056,82,65,"this"],[1,1061,59,2,"_samplesStartTime"],[1,1079,59,23],[1,1084,83,4,"this"],[1,1089,83,9,"_getFrameMetrics"],[1,1106,83,28,"getFrameMetrics"],[1,1108,84,4,"this"],[1,1113,84,9,"_enabled"],[1,1123,84,21,"_sampleRate"],[1,1126,84,36],[1,1129,84,41,"Math"],[1,1134,84,46,"random"],[1,1143,85,4,"this"],[1,1148,85,9,"_resetData"],[1,1212,61,21,"callback"],[1,1215,67,4],[1,1222,62,4,"warning"],[1,1224,63,22],[1,1231,63,6,"_sampleRate"],[1,1233,64,6],[1,1294,66,4,"_listeners"],[1,1296,66,15,"push"],[1,1301,66,20,"callback"],[1,1305,68,6,"remove"],[1,1312,68,14],[1,1323,69,8,"_listeners"],[1,1325,69,21,"_listeners"],[1,1327,69,32,"filter"],[1,1334,69,39],[1,1343,69,39,"listener"],[1,1346,69,47],[1,1353,69,51,"callback"],[1,1357,69,64,"listener"],[1,1401,74,23,"sampleRate"],[1,1404,75,4,"_sampleRate"],[1,1406,75,18,"sampleRate"],[1,1450,78,27,"minSampleCount"],[1,1453,79,4,"_minSampleCount"],[1,1455,79,22,"minSampleCount"],[1,1499,89,8,"this"],[1,1504,89,13,"_enabled"],[1,1514,89,51],[1,1520,89,25,"this"],[1,1525,89,30,"_samplesStartTime"],[1,1545,91,6,"this"],[1,1550,91,11,"_samplesStartTime"],[1,1568,91,31,"performanceNow"],[1,1618,96,4],[1,1621,96,9,"this"],[1,1626,96,14,"_enabled"],[1,1635,96,4],[1,1636,99,4],[1,1640,99,10,"start"],[1,1642,99,18,"this"],[1,1647,99,23,"_samplesStartTime"],[1,1665,100,4],[1,1668,100,17],[1,1674,100,8,"start"],[1,1676,105,4],[1,1679,105,8,"this"],[1,1684,105,13,"_info"],[1,1690,105,19,"sample_count"],[1,1703,105,34,"_minSampleCount"],[1,1705,107,6,"this"],[1,1710,107,11,"_resetData"],[1,1727,105,4],[1,1728,110,4],[1,1732,110,10,"total_time_spent"],[1,1734,110,29,"performanceNow"],[1,1738,110,48,"start"],[1,1740,111,10,"info"],[1,1742,111,19,"_objectSpread"],[1,1747,112,9,"this"],[1,1752,112,14,"_info"],[1,1759,113,6,"total_time_spent"],[1,1776,113,6,"total_time_spent"],[1,1780,133,4,"_listeners"],[1,1782,133,15,"forEach"],[1,1790,133,23],[1,1799,133,23,"listener"],[1,1802,133,31],[1,1809,133,35,"listener"],[1,1811,133,44,"info"],[1,1816,134,4,"this"],[1,1821,134,9,"_resetData"],[1,1877,138,4,"props"],[1,1879,143,4,"state"],[1,1881,147,4,"scrollMetrics"],[1,1884,154,4],[1,1888,155,7,"this"],[1,1893,155,12,"_enabled"],[1,1903,156,41],[1,1907,156,6,"props"],[1,1909,156,12,"getItemCount"],[1,1922,156,25,"props"],[1,1924,156,31,"data"],[1,1931,157,32],[1,1937,157,6,"this"],[1,1942,157,11,"_samplesStartTime"],[1,1960,159,6],[1,1967,159,13],[1,1969,153,12],[1,1973,161,11,"dOffset"],[1,1975,161,55,"scrollMetrics"],[1,1977,161,11,"dOffset"],[1,1985,161,20,"offset"],[1,1987,161,55,"scrollMetrics"],[1,1989,161,20,"offset"],[1,1996,161,28,"velocity"],[1,1998,161,55,"scrollMetrics"],[1,2000,161,28,"velocity"],[1,2009,161,38,"visibleLength"],[1,2011,161,55,"scrollMetrics"],[1,2013,161,38,"visibleLength"],[1,2027,165,4,"this"],[1,2032,165,9,"_info"],[1,2038,165,15,"sample_count"],[1,2053,166,4,"this"],[1,2058,166,9,"_info"],[1,2064,166,15,"pixels_sampled"],[1,2080,166,33,"Math"],[1,2085,166,38,"round"],[1,2091,166,44,"visibleLength"],[1,2094,167,4,"this"],[1,2099,167,9,"_info"],[1,2105,167,15,"pixels_scrolled"],[1,2122,167,34,"Math"],[1,2127,167,39,"round"],[1,2133,167,45,"Math"],[1,2138,167,50,"abs"],[1,2142,167,54,"dOffset"],[1,2146,168,4],[1,2150,168,10,"scrollSpeed"],[1,2152,168,24,"Math"],[1,2157,168,29,"round"],[1,2163,168,56],[1,2167,168,35,"Math"],[1,2172,168,40,"abs"],[1,2176,168,44,"velocity"],[1,2180,171,10,"now"],[1,2182,171,16,"performanceNow"],[1,2186,172,35],[1,2192,172,8,"this"],[1,2197,172,13,"_anyBlankStartTime"],[1,2218,173,6,"this"],[1,2223,173,11,"_info"],[1,2229,173,17,"any_blank_ms"],[1,2243,173,33,"now"],[1,2245,173,39,"this"],[1,2250,173,44,"_anyBlankStartTime"],[1,2270,175,4,"this"],[1,2275,175,9,"_anyBlankStartTime"],[1,2294,175,30],[1,2299,176,38],[1,2305,176,8,"this"],[1,2310,176,13,"_mostlyBlankStartTime"],[1,2334,177,6,"this"],[1,2339,177,11,"_info"],[1,2345,177,17,"mostly_blank_ms"],[1,2362,177,36,"now"],[1,2364,177,42,"this"],[1,2369,177,47,"_mostlyBlankStartTime"],[1,2392,179,4,"this"],[1,2397,179,9,"_mostlyBlankStartTime"],[1,2419,179,33],[1,2424,184,4],[1,2428,181,4],[1,2432,181,8,"blankTop"],[1,2434,181,19],[1,2436,182,8,"first"],[1,2438,182,16,"state"],[1,2440,182,22,"first"],[1,2446,183,8,"firstFrame"],[1,2448,183,21,"this"],[1,2453,183,26,"_getFrameMetrics"],[1,2470,183,43,"first"],[1,2473,184,11,"first"],[1,2476,184,20,"state"],[1,2478,184,26,"last"],[1,2486,184,36,"firstFrame"],[1,2490,184,51,"firstFrame"],[1,2492,184,62,"inLayout"],[1,2503,185,6,"firstFrame"],[1,2505,185,19,"this"],[1,2510,185,24,"_getFrameMetrics"],[1,2527,185,41,"first"],[1,2530,186,6,"first"],[1,2534,190,8,"firstFrame"],[1,2537,190,22,"first"],[1,2539,190,30],[1,2543,191,6,"blankTop"],[1,2545,191,17,"Math"],[1,2550,191,22,"min"],[1,2554,192,8,"visibleLength"],[1,2556,193,8,"Math"],[1,2561,193,13,"max"],[1,2565,193,17],[1,2567,193,20,"firstFrame"],[1,2569,193,31,"offset"],[1,2576,193,40,"offset"],[1,2581,199,4],[1,2585,196,4],[1,2589,196,8,"blankBottom"],[1,2591,196,22],[1,2593,197,8,"last"],[1,2595,197,15,"state"],[1,2597,197,21,"last"],[1,2602,198,8,"lastFrame"],[1,2604,198,20,"this"],[1,2609,198,25,"_getFrameMetrics"],[1,2626,198,42,"last"],[1,2629,199,11,"last"],[1,2632,199,19,"state"],[1,2634,199,25,"first"],[1,2643,199,36,"lastFrame"],[1,2647,199,50,"lastFrame"],[1,2649,199,60,"inLayout"],[1,2660,200,6,"lastFrame"],[1,2662,200,18,"this"],[1,2667,200,23,"_getFrameMetrics"],[1,2684,200,40,"last"],[1,2687,201,6,"last"],[1,2691,205,4],[1,2694,205,8,"lastFrame"],[1,2697,205,21,"last"],[1,2699,205,28,"props"],[1,2701,205,34,"getItemCount"],[1,2714,205,47,"props"],[1,2716,205,53,"data"],[1,2722,205,61],[1,2724,205,64],[1,2725,206,6],[1,2729,206,12,"bottomEdge"],[1,2731,206,25,"lastFrame"],[1,2733,206,35,"offset"],[1,2740,206,44,"lastFrame"],[1,2742,206,54,"length"],[1,2749,207,6,"blankBottom"],[1,2751,207,20,"Math"],[1,2756,207,25,"min"],[1,2760,208,8,"visibleLength"],[1,2762,209,8,"Math"],[1,2767,209,13,"max"],[1,2771,209,17],[1,2773,209,20,"offset"],[1,2775,209,29,"visibleLength"],[1,2777,209,45,"bottomEdge"],[1,2781,212,4],[1,2785,212,10,"pixels_blank"],[1,2787,212,25,"Math"],[1,2792,212,30,"round"],[1,2798,212,36,"blankTop"],[1,2800,212,47,"blankBottom"],[1,2803,213,10,"blankness"],[1,2805,213,22,"pixels_blank"],[1,2807,213,37,"visibleLength"],[1,2809,226,4],[1,2816,214,8,"blankness"],[1,2818,214,20],[1,2821,215,6,"this"],[1,2826,215,11,"_anyBlankStartTime"],[1,2845,215,32,"now"],[1,2847,216,6,"this"],[1,2852,216,11,"_info"],[1,2858,216,17,"any_blank_speed_sum"],[1,2879,216,40,"scrollSpeed"],[1,2881,217,6,"this"],[1,2886,217,11,"_info"],[1,2892,217,17,"any_blank_count"],[1,2910,218,6,"this"],[1,2915,218,11,"_info"],[1,2921,218,17,"pixels_blank"],[1,2935,218,33,"pixels_blank"],[1,2937,219,10,"blankness"],[1,2939,219,22],[1,2944,220,8,"this"],[1,2949,220,13,"_mostlyBlankStartTime"],[1,2971,220,37,"now"],[1,2973,221,8,"this"],[1,2978,221,13,"_info"],[1,2984,221,19,"mostly_blank_count"],[1,3008,223,15,"scrollSpeed"],[1,3010,223,29],[1,3015,223,37,"Math"],[1,3020,223,42,"abs"],[1,3024,223,46,"dOffset"],[1,3027,223,57],[1,3031,224,6,"this"],[1,3036,224,11,"deactivateAndFlush"],[1,3057,226,11,"blankness"],[1,3093,230,4],[1,3100,230,11,"this"],[1,3105,230,16,"_enabled"],[1,3151,234,4,"this"],[1,3156,234,9,"_anyBlankStartTime"],[1,3175,234,30],[1,3180,235,4,"this"],[1,3185,235,9,"_info"],[1,3191,235,17],[1,3195,235,21,"Info"],[1,3197,236,4,"this"],[1,3202,236,9,"_mostlyBlankStartTime"],[1,3224,236,33],[1,3229,237,4,"this"],[1,3234,237,9,"_samplesStartTime"],[1,3252,237,29],[1,3267,241,0,"module"],[1,3269,241,7,"exports"],[1,3277,241,17,"FillRateHelper"]]},"type":"js/module"}]}