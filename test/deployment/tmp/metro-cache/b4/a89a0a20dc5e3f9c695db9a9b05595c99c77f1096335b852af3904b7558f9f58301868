{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"infoLog","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=r(d[2]);function s(t,n){var u=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),u.push.apply(u,s)}return u}function o(n){for(var u=1;u<arguments.length;u++){var o=null!=arguments[u]?arguments[u]:{};u%2?s(o,!0).forEach(function(u){t(n,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):s(o).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}r(d[3]);var c=r(d[4]),h=(function(){function t(u){var s=u.onMoreTasks;n(this,t),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}return u(t,[{key:\"enqueue\",value:function(t){this._getCurrentQueue().push(t)}},{key:\"enqueueTasks\",value:function(t){var n=this;t.forEach(function(t){return n.enqueue(t)})}},{key:\"cancelTasks\",value:function(t){this._queueStack=this._queueStack.map(function(n){return o({},n,{tasks:n.tasks.filter(function(n){return-1===t.indexOf(n)})})}).filter(function(t,n){return t.tasks.length>0||0===n})}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var t=this._getCurrentQueue();if(t.length){var n=t.shift();try{n.gen?this._genPromise(n):n.run?n.run():(c('function'==typeof n,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(n,null,2)),n())}catch(t){throw t.message='TaskQueue: Error with task '+(n.name||'')+': '+t.message,t}}}},{key:\"_getCurrentQueue\",value:function(){var t=this._queueStack.length-1,n=this._queueStack[t];return n.popable&&0===n.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}},{key:\"_genPromise\",value:function(t){var n=this;this._queueStack.push({tasks:[],popable:!1});var u=this._queueStack.length-1;t.gen().then(function(){n._queueStack[u].popable=!0,n.hasTasksToProcess()&&n._onMoreTasks()}).catch(function(n){throw n.message=\"TaskQueue: Error resolving Promise in task \"+t.name+\": \"+n.message,n}).done()}}]),t})();m.exports=h});","map":[[1,28,11,0],[1,628,13,16,"require"],[1,630,13,23,"d"],[1,632,13,23],[1,636,13,0],[1,640,14,6,"invariant"],[1,642,14,18,"require"],[1,644,14,25,"d"],[1,646,14,25],[1,650,44,6,"TaskQueue"],[1,664,52,2],[1,673,52,2,"TaskQueue"],[1,675,52,2,"_ref"],[1,678,52,56],[1,682,52,15,"onMoreTasks"],[1,684,52,56,"_ref"],[1,686,52,15,"onMoreTasks"],[1,698,52,56,"_classCallCheck"],[1,700,52,56,"this"],[1,705,52,56,"TaskQueue"],[1,708,53,4,"this"],[1,713,53,9,"_onMoreTasks"],[1,726,53,24,"onMoreTasks"],[1,728,54,4,"this"],[1,733,54,9,"_queueStack"],[1,747,54,25,"tasks"],[1,756,54,36,"popable"],[1,765,54,45],[1,811,62,10,"task"],[1,814,63,4,"this"],[1,819,63,9,"_getCurrentQueue"],[1,838,63,28,"push"],[1,843,63,33,"task"],[1,883,66,15,"tasks"],[1,886,66,41],[1,890,66,41,"_this"],[1,892,66,41,"this"],[1,897,67,4,"tasks"],[1,899,67,10,"forEach"],[1,907,67,18],[1,916,67,18,"task"],[1,919,67,22],[1,926,67,26,"_this"],[1,928,67,31,"enqueue"],[1,936,67,39,"task"],[1,977,70,14,"tasksToCancel"],[1,980,72,4,"this"],[1,985,72,9,"_queueStack"],[1,997,72,23,"this"],[1,1002,72,28,"_queueStack"],[1,1014,73,7,"map"],[1,1018,73,11],[1,1027,73,11,"queue"],[1,1030,73,16],[1,1037,73,16,"_objectSpread"],[1,1042,74,11,"queue"],[1,1045,75,8,"tasks"],[1,1051,75,15,"queue"],[1,1053,75,21,"tasks"],[1,1059,75,27,"filter"],[1,1066,75,34],[1,1075,75,34,"task"],[1,1078,75,38],[1,1085,75,42],[1,1089,75,42,"tasksToCancel"],[1,1091,75,56,"indexOf"],[1,1099,75,64,"task"],[1,1108,77,7,"filter"],[1,1115,77,14],[1,1124,77,15,"queue"],[1,1126,77,22,"idx"],[1,1129,77,14],[1,1136,77,30,"queue"],[1,1138,77,36,"tasks"],[1,1144,77,42,"length"],[1,1151,77,51],[1,1154,77,64],[1,1158,77,56,"idx"],[1,1206,91,4],[1,1213,91,11,"this"],[1,1218,91,16,"_getCurrentQueue"],[1,1237,91,35,"length"],[1,1244,91,44],[1,1284,98,4],[1,1288,98,10,"queue"],[1,1290,98,18,"this"],[1,1295,98,23,"_getCurrentQueue"],[1,1314,99,4],[1,1317,99,8,"queue"],[1,1319,99,14,"length"],[1,1326,99,22],[1,1327,100,6],[1,1331,100,12,"task"],[1,1333,100,19,"queue"],[1,1335,100,25,"shift"],[1,1343,101,6],[1,1347,102,12,"task"],[1,1349,102,17,"gen"],[1,1353,104,10,"this"],[1,1358,104,15,"_genPromise"],[1,1370,104,28,"task"],[1,1373,105,19,"task"],[1,1375,105,24,"run"],[1,1379,107,10,"task"],[1,1381,107,15,"run"],[1,1388,109,10,"invariant"],[1,1390,110,28],[1,1409,110,19,"task"],[1,1411,111,12],[1,1471,112,14,"JSON"],[1,1476,112,19,"stringify"],[1,1486,112,29,"task"],[1,1488,112,35],[1,1493,112,41],[1,1497,115,10,"task"],[1,1502,117,8],[1,1508,117,15,"e"],[1,1511,120,8],[1,1517,118,8,"e"],[1,1519,118,10,"message"],[1,1527,119,10],[1,1558,119,43,"task"],[1,1560,119,48,"name"],[1,1566,119,56],[1,1570,119,62],[1,1575,119,69,"e"],[1,1577,119,71,"message"],[1,1585,120,14,"e"],[1,1632,129,4],[1,1636,129,10,"stackIdx"],[1,1638,129,21,"this"],[1,1643,129,26,"_queueStack"],[1,1655,129,38,"length"],[1,1662,129,47],[1,1664,130,10,"queue"],[1,1666,130,18,"this"],[1,1671,130,23,"_queueStack"],[1,1683,130,35,"stackIdx"],[1,1686,131,4],[1,1693,132,6,"queue"],[1,1695,132,12,"popable"],[1,1704,133,29],[1,1708,133,6,"queue"],[1,1710,133,12,"tasks"],[1,1716,133,18,"length"],[1,1724,134,6,"this"],[1,1729,134,11,"_queueStack"],[1,1741,134,23,"length"],[1,1748,134,32],[1,1751,136,6,"this"],[1,1756,136,11,"_queueStack"],[1,1768,136,23,"pop"],[1,1774,142,13,"this"],[1,1779,142,18,"_getCurrentQueue"],[1,1799,144,13,"queue"],[1,1801,144,19,"tasks"],[1,1843,148,14,"task"],[1,1846,148,33],[1,1850,148,33,"_this2"],[1,1852,148,33,"this"],[1,1857,153,4,"this"],[1,1862,153,9,"_queueStack"],[1,1874,153,21,"push"],[1,1880,153,27,"tasks"],[1,1889,153,38,"popable"],[1,1898,153,47],[1,1902,154,4],[1,1906,154,10,"stackIdx"],[1,1908,154,21,"this"],[1,1913,154,26,"_queueStack"],[1,1925,154,38,"length"],[1,1932,154,47],[1,1934,157,4,"task"],[1,1936,158,7,"gen"],[1,1942,159,7,"then"],[1,1947,159,12],[1,1958,165,8,"_this2"],[1,1960,165,13,"_queueStack"],[1,1972,165,25,"stackIdx"],[1,1975,165,35,"popable"],[1,1984,165,45],[1,1986,166,8,"_this2"],[1,1988,166,13,"hasTasksToProcess"],[1,2009,166,36,"_this2"],[1,2011,166,41,"_onMoreTasks"],[1,2028,168,7,"catch"],[1,2034,168,13],[1,2043,168,13,"ex"],[1,2046,172,8],[1,2052,169,8,"ex"],[1,2054,169,11,"message"],[1,2062,169,8],[1,2108,170,10,"task"],[1,2110,170,15,"name"],[1,2115,169,8],[1,2120,171,13,"ex"],[1,2122,171,16,"message"],[1,2130,172,14,"ex"],[1,2134,174,7,"done"],[1,2151,178,0,"module"],[1,2153,178,7,"exports"],[1,2161,178,17,"TaskQueue"]]},"type":"js/module"}]}